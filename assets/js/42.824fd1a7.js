(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{368:function(s,a,n){"use strict";n.r(a);var t=n(4),e=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("https://www.infoq.cn/article/v9qj0fjj6hsgyq0lphxg")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("**Docker：使用x86平台Docker 拉取 arm版镜像**\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看已有镜像的manifest")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" manifest inspect "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--insecure")]),s._v(" 镜像名称\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#拉取指定平台的镜像")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--platform")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("arm64   镜像名称   \n    \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#先将x86和arm镜像推送到仓库后")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建manifest镜像信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" manifest create "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--insecure")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --insecure  防止远程仓库没有Https证书的问题")]),s._v("\nregistry.cn-hangzhou.aliyuncs.com/zhangst/test:pause3.2  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#统一架构后的镜像地址")]),s._v("\nregistry.cn-hangzhou.aliyuncs.com/zhangst/test:pause3.2-arm64  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#arm镜像名")]),s._v("\nregistry.cn-hangzhou.aliyuncs.com/zhangst/test:pause3.2-x86       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#X86镜像名")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#将manifest镜像信息提交到仓库中")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" manifest push "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#统一架构后的镜像地址")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" manifest create "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--insecure")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--amend")]),s._v(" xxx/nginx:nginx-arm64 xxx/nginx:nginx-x86\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#声明不同架构镜像对应的操作系统和cpu架构类型")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" manifest annotate   统一架构后的镜像  arm镜像名  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--os")]),s._v(" linux "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--arch")]),s._v(" arm64\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#构建镜像并push到镜像仓库")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" buildx build "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--platform")]),s._v(" linux/amd64,linux/arm64 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" 镜像名 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--push")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);