(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{345:function(t,v,e){"use strict";e.r(v);var o=e(4),l=Object(o.a)({},(function(){var t=this,v=t._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"centos-扩容"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#centos-扩容"}},[t._v("#")]),t._v(" centos/扩容")]),t._v(" "),v("h1",{attrs:{id:"一、重新读取磁盘信息"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#一、重新读取磁盘信息"}},[t._v("#")]),t._v(" 一、重新读取磁盘信息")]),t._v(" "),v("ol",[v("li",[t._v("由于不知道新增硬盘挂载的位置，可以先查看现有硬盘挂载的适配器。")])]),t._v(" "),v("ul",[v("li",[t._v("[root@localhost ~]# ls -l /sys/block/sda")]),t._v(" "),v("li",[t._v("lrwxrwxrwx. 1 root root 0 Jun 15 11:47 /sys/block/sda ->   …/devices/pci0000:00/0000:00:10.0/host2/target32:0:0/32:0:0:0/block/sda\n"),v("ol",[v("li",[t._v("发现正在磁盘挂载到host32，可以尝试使用下边命令，重新扫描host32信息")])])]),t._v(" "),v("li",[t._v("echo “- - -” >  /sys/class/scsi_host/host2/scan")])]),t._v(" "),v("h1",{attrs:{id:"二、扩容操作"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#二、扩容操作"}},[t._v("#")]),t._v(" 二、扩容操作")]),t._v(" "),v("ol",[v("li",[t._v("查看现有磁盘信息，可以看出根分区有45G")])]),t._v(" "),v("ul",[v("li",[t._v("[root@DEV-CMDB-DB02 ~]# df -h")]),t._v(" "),v("li",[t._v("Filesystem               Size Used Avail Use% Mounted  on")]),t._v(" "),v("li",[t._v("/dev/mapper/centos_mb–centos7-root   45G 9.8G  35G  23% /")]),t._v(" "),v("li",[t._v("devtmpfs                5.9G   0 5.9G   0% /dev")]),t._v(" "),v("li",[t._v("tmpfs                 5.9G  84K 5.9G   1% /dev/shm")]),t._v(" "),v("li",[t._v("tmpfs                 5.9G 8.9M 5.9G   1% /run")]),t._v(" "),v("li",[t._v("tmpfs                 5.9G   0 5.9G   0% /sys/fs/cgroup")]),t._v(" "),v("li",[t._v("/dev/sda1               497M 142M 356M  29% /boot")]),t._v(" "),v("li",[t._v("tmpfs                 1.2G  16K 1.2G   1% /run/user/42")]),t._v(" "),v("li",[t._v("tmpfs                 1.2G   0 1.2G   0% /run/user/0")])]),t._v(" "),v("ol",[v("li",[t._v("查看新增加的磁盘信息")])]),t._v(" "),v("ul",[v("li",[v("p",[t._v("[root@DEV-CMDB-DB02 ~]# fdisk -l")]),t._v(" "),v("ol",[v("li",[t._v("根据以上信息，对新增加的磁盘进行分区")])])]),t._v(" "),v("li",[v("p",[t._v("[root@DEV-CMDB-DB02 ~]# fdisk /dev/sdb")]),t._v(" "),v("ul",[v("li",[t._v("Command (m for help):       p")]),t._v(" "),v("li",[t._v("Command (m for help):       n\nPartition type:\np  primary (0 primary, 0 extended, 4       free)\ne  extended")]),t._v(" "),v("li",[t._v("Select (default p): p")]),t._v(" "),v("li",[t._v("Partition number (1-4, default       1): 1")]),t._v(" "),v("li",[t._v("First sector (2048-209715199,       default 2048):\nUsing default value 2048\nLast sector, +sectors or +size{K,M,G} (2048-209715199, default       209715199):\nUsing default value 209715199\nPartition 1 of type Linux and of size 100 GiB is set")])]),t._v(" "),v("ol",[v("li",[t._v("分区完成后修改分区类型为lvm")])]),t._v(" "),v("ul",[v("li",[t._v("Command (m for help): t")]),t._v(" "),v("li",[t._v("Hex code (type L to list all       codes): L")]),t._v(" "),v("li",[t._v("Hex code (type L to list all       codes): 8e")]),t._v(" "),v("li",[t._v("Command (m for help): p")]),t._v(" "),v("li",[t._v("Command (m for help): w")])]),t._v(" "),v("ol",[v("li",[t._v("创建物理卷")])])]),t._v(" "),v("li",[v("p",[t._v("[root@DEV-CMDB-DB02 ~]# pvcreate /dev/sdb1")])]),t._v(" "),v("li",[v("p",[t._v("Physical volume “/dev/sdb1”  successfully created")])])]),t._v(" "),v("ol",[v("li",[t._v("查看物理卷信息")])]),t._v(" "),v("ul",[v("li",[t._v("[root@DEV-CMDB-DB02 ~]# pvs")]),t._v(" "),v("li",[t._v("[root@DEV-CMDB-DB02 ~]# df -h\n2. 将新增加的分区/dev/sdb1加入到根目录分区centos_mb-centos7中")]),t._v(" "),v("li",[t._v("[root@DEV-CMDB-DB02 ~]# vgextend centos /dev/sdb1\n2. 重新查看卷组信息")]),t._v(" "),v("li",[t._v("[root@DEV-CMDB-DB02 ~]# vgs\n2. 进行卷扩容")]),t._v(" "),v("li",[t._v("[root@DEV-CMDB-DB02 ~]# lvextend -l +100%FREE  /dev/mapper/centos-root\n2. 调整卷分区大小")]),t._v(" "),v("li",[t._v("[root@DEV-CMDB-DB02 ~]# xfs_growfs  /dev/mapper/centos_mb–centos7-root\n2. 查看磁盘信息可以看出根目录分区大小已成功扩容")]),t._v(" "),v("li",[t._v("[root@DEV-CMDB-DB02 ~]# df -h")])]),t._v(" "),v("p",[t._v("来自：https://www.cuiliangblog.cn/detail/section/31508148")])])}),[],!1,null,null,null);v.default=l.exports}}]);